<!DOCTYPE html>
<html>
<head>
    <title>AR.js Stable Tracking</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/aframe/1.4.2/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <script>
        AFRAME.registerComponent('model-visibility', {
            init: function() {
                this.el.sceneEl.addEventListener('markerFound', () => {
                    this.el.setAttribute('visible', true);
                });
                this.el.sceneEl.addEventListener('markerLost', () => {
                    setTimeout(() => {
                        this.el.setAttribute('visible', false);
                    }, 500);
                });
            }
        });
    </script>
</head>
<body style="margin: 0; overflow: hidden;">
    <a-scene embedded 
             arjs="trackingMethod: best; 
                   sourceType: webcam; 
                   debugUIEnabled: false;
                   patternRatio: 0.80;
                   maxDetectionRate: 30;
                   canvasWidth: 1280;
                   canvasHeight: 960;">
        <a-marker type="pattern" 
                  url="pattern-QR.patt"
                  smooth="true"
                  smoothCount="15"
                  smoothTolerance: "0.005"
                  smoothThreshold="5"
                  raycaster="objects: .clickable">
            <a-entity 
                position="0 0 0"
                rotation="0 0 0"
                scale="1 1 1"
                class="clickable"
                model-visibility
                gltf-model="TestQr.glb">
            </a-entity>
        </a-marker>
        <a-entity camera></a-entity>
    </a-scene>
</body>
</html>
